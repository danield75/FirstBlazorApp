@page "/draw-canvas"

<h3>Draw with Mouse</h3>

<canvas id="drawCanvas" width="800" height="600"
        style="border:1px solid black;"
        @onmousedown="BeginDrawing"
        @onmouseup="EndDrawing"
        @onmousemove="DrawAsync">
</canvas>

@code {
    private bool _isDrawing = false;

    private async Task BeginDrawing(MouseEventArgs e)
    {
        _isDrawing = true;
        await Js.InvokeVoidAsync("startDrawing", e.ClientX, e.ClientY);
    }

    private async Task EndDrawing(MouseEventArgs e)
    {
        _isDrawing = false;
        await Js.InvokeVoidAsync("stopDrawing");
    }

    private async Task DrawAsync(MouseEventArgs e)
    {
        if (_isDrawing)
        {
            await Js.InvokeVoidAsync("draw", e.ClientX, e.ClientY);
        }
    }

    [Inject]
    private IJSRuntime Js { get; set; }
}

